# é™„ä»¶æ˜¾ç¤ºä¼˜åŒ–è¯´æ˜

## ä¼˜åŒ–å†…å®¹

å°†é™„ä»¶æ˜¾ç¤ºä»"å‘é€åæ¶ˆå¤±"æ”¹ä¸º"ç¼©å°æ˜¾ç¤ºåœ¨ç”¨æˆ·æ¶ˆæ¯ä¸Šæ–¹"ã€‚

## è§†è§‰æ•ˆæœ

### ä¹‹å‰
```
[è¾“å…¥æ¡†]
ğŸ“ [å›¾ç‰‡é¢„è§ˆ 120x120]  [å›¾ç‰‡é¢„è§ˆ 120x120]
[å‘é€æŒ‰é’®]

â†“ å‘é€å

[ç”¨æˆ·æ¶ˆæ¯]
ä½ å¥½ï¼Œè¿™æ˜¯ä»€ä¹ˆï¼Ÿ

[AI å›å¤]
è¿™æ˜¯ä¸€åªçŒ«...
```

### ç°åœ¨
```
[è¾“å…¥æ¡†]
ğŸ“ [å›¾ç‰‡é¢„è§ˆ 120x120]  [å›¾ç‰‡é¢„è§ˆ 120x120]
[å‘é€æŒ‰é’®]

â†“ å‘é€å

[ç¼©å°å›¾ç‰‡ 80x80]  [ç¼©å°å›¾ç‰‡ 80x80]  â† é™„ä»¶ç¼©å°æ˜¾ç¤ºåœ¨ä¸Šæ–¹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·æ¶ˆæ¯            â”‚
â”‚ ä½ å¥½ï¼Œè¿™æ˜¯ä»€ä¹ˆï¼Ÿ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[AI å›å¤]
è¿™æ˜¯ä¸€åªçŒ«...
```

## æŠ€æœ¯å®ç°

### 1. ç»„ä»¶ç»“æ„è°ƒæ•´

**Message.jsx** - æ–°å¢ `message-wrapper` å±‚çº§ï¼š

```jsx
<article className="message">
  <div className="message-avatar">æˆ‘</div>
  <div className="message-wrapper">           {/* æ–°å¢ wrapper */}
    {isUser && attachments.length > 0 && (
      <div className="message-attachments-above">  {/* é™„ä»¶åœ¨ä¸Šæ–¹ */}
        {attachments.map((attachment) => (
          <div className="message-attachment-small">
            <img className="message-attachment-image-small" />
          </div>
        ))}
      </div>
    )}
    <div className="message-content">         {/* åŸæœ‰çš„æ¶ˆæ¯å†…å®¹ */}
      {/* æ¶ˆæ¯æ–‡æœ¬ */}
    </div>
  </div>
</article>
```

### 2. CSS æ ·å¼

**ç¼©å°çš„é™„ä»¶æ ·å¼**ï¼š
```css
.message-attachment-image-small {
  width: 80px;           /* ä» 120px ç¼©å°åˆ° 80px */
  height: 80px;
  object-fit: cover;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.message-attachment-image-small:hover {
  transform: scale(1.05);  /* æ‚¬åœæ”¾å¤§æ•ˆæœ */
}
```

**å¸ƒå±€æ ·å¼**ï¼š
```css
.message-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}

.message-attachments-above {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 4px;
}
```

## å¯¹æ¯”è¡¨

| ç‰¹æ€§ | ä¹‹å‰ | ç°åœ¨ |
|------|------|------|
| é™„ä»¶ä½ç½® | Composer é¢„è§ˆåŒº | ç”¨æˆ·æ¶ˆæ¯ä¸Šæ–¹ |
| å‘é€åçŠ¶æ€ | æ¶ˆå¤± | ä¿ç•™ï¼ˆç¼©å°ï¼‰ |
| å›¾ç‰‡å°ºå¯¸ | 120x120 | 80x80 |
| äº¤äº’æ•ˆæœ | åˆ é™¤æŒ‰é’® | æ‚¬åœæ”¾å¤§ |
| è§†è§‰è¿è´¯æ€§ | âŒ æ–­å¼€ | âœ… è¿ç»­ |

## ç”¨æˆ·ä½“éªŒæå‡

### 1. **è§†è§‰è¿è´¯æ€§**
- âœ… ç”¨æˆ·å¯ä»¥æ¸…æ¥šçœ‹åˆ°è‡ªå·±å‘é€äº†å“ªäº›å›¾ç‰‡
- âœ… é™„ä»¶å’Œæ¶ˆæ¯çš„å…³è”æ›´æ˜æ˜¾
- âœ… å¯¹è¯å†å²æ›´å®Œæ•´

### 2. **ä¸Šä¸‹æ–‡ä¿æŒ**
- âœ… æ»šåŠ¨æŸ¥çœ‹å†å²æ—¶ï¼Œèƒ½çœ‹åˆ°æ¯æ¡æ¶ˆæ¯çš„é™„ä»¶
- âœ… å¤šè½®å¯¹è¯æ—¶ï¼Œå›¾ç‰‡ä¸ä¼šæ··æ·†
- âœ… ä¾¿äºå›é¡¾å’Œå¼•ç”¨

### 3. **ç©ºé—´ä¼˜åŒ–**
- âœ… ç¼©å°åˆ° 80x80ï¼Œä¸å ç”¨è¿‡å¤šç©ºé—´
- âœ… å¤šå¼ å›¾ç‰‡æ¨ªå‘æ’åˆ—ï¼ŒèŠ‚çœå‚ç›´ç©ºé—´
- âœ… ä¿æŒç•Œé¢æ•´æ´

### 4. **äº¤äº’ä¼˜åŒ–**
- âœ… æ‚¬åœæ—¶å›¾ç‰‡è½»å¾®æ”¾å¤§ï¼Œæä¾›è§†è§‰åé¦ˆ
- âœ… ç‚¹å‡»å¯æŸ¥çœ‹å¤§å›¾ï¼ˆå¯æ‰©å±•ï¼‰
- âœ… é˜´å½±å’ŒåŠ¨ç”»æå‡è´¨æ„Ÿ

## é€‚ç”¨åœºæ™¯

### åœºæ™¯ 1: å•å›¾ç‰‡é—®ç­”
```
[å›¾ç‰‡: cat.jpg 80x80]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿™æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼Ÿâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI: è¿™æ˜¯ä¸€åªæ©˜çŒ«...
```

### åœºæ™¯ 2: å¤šå›¾ç‰‡å¯¹æ¯”
```
[å›¾ç‰‡1: 80x80] [å›¾ç‰‡2: 80x80] [å›¾ç‰‡3: 80x80]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿™ä¸‰å¼ å›¾æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI: ç¬¬ä¸€å¼ æ˜¯ç™½å¤©ï¼Œç¬¬äºŒå¼ æ˜¯...
```

### åœºæ™¯ 3: å›¾ç‰‡ + æ–‡æ¡£
```
[å›¾ç‰‡: 80x80] [ğŸ“„ report.pdf]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ†æè¿™ä»½æŠ¥å‘Šçš„æ•°æ®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI: æ ¹æ®æŠ¥å‘Šæ˜¾ç¤º...
```

## æŠ€æœ¯ç»†èŠ‚

### ä»…å¯¹ç”¨æˆ·æ¶ˆæ¯æ˜¾ç¤ºé™„ä»¶
```jsx
{isUser && attachments.length > 0 && (
  <div className="message-attachments-above">
    {/* é™„ä»¶åˆ—è¡¨ */}
  </div>
)}
```

**åŸå› **ï¼š
- AI å›å¤ä¸åŒ…å«é™„ä»¶
- ä¿æŒç•Œé¢ç®€æ´
- ç¬¦åˆå¯¹è¯é€»è¾‘

### å“åº”å¼è®¾è®¡
```css
.message-attachments-above {
  flex-wrap: wrap;  /* è‡ªåŠ¨æ¢è¡Œ */
}

@media (max-width: 768px) {
  .message-attachment-image-small {
    width: 60px;    /* ç§»åŠ¨ç«¯æ›´å° */
    height: 60px;
  }
}
```

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ `object-fit: cover` ä¿æŒå›¾ç‰‡æ¯”ä¾‹
- CSS `transform` ç¡¬ä»¶åŠ é€Ÿ
- æ‡’åŠ è½½ï¼ˆå¯æ‰©å±•ï¼‰

## æœªæ¥æ‰©å±•

### 1. å›¾ç‰‡ç‚¹å‡»æ”¾å¤§
```jsx
const [lightboxOpen, setLightboxOpen] = useState(false)

<img 
  onClick={() => setLightboxOpen(true)}
  className="message-attachment-image-small"
/>

{lightboxOpen && (
  <Lightbox image={attachment.url} onClose={() => setLightboxOpen(false)} />
)}
```

### 2. é™„ä»¶æ•°é‡å¾½ç« 
```jsx
{attachments.length > 3 && (
  <div className="attachment-count-badge">
    +{attachments.length - 3}
  </div>
)}
```

### 3. é™„ä»¶ç±»å‹å›¾æ ‡
```jsx
const getFileIcon = (type) => {
  if (type.startsWith('image/')) return 'ğŸ–¼ï¸'
  if (type === 'application/pdf') return 'ğŸ“„'
  if (type.includes('word')) return 'ğŸ“'
  return 'ğŸ“'
}
```

### 4. åŠ è½½çŠ¶æ€
```jsx
{attachment.loading && (
  <div className="attachment-loading">
    <Spinner />
  </div>
)}
```

## æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. âœ… å‘é€å•å¼ å›¾ç‰‡ï¼Œæ£€æŸ¥æ˜¯å¦ç¼©å°æ˜¾ç¤º
2. âœ… å‘é€å¤šå¼ å›¾ç‰‡ï¼Œæ£€æŸ¥æ’åˆ—
3. âœ… å‘é€å›¾ç‰‡ + æ–‡æœ¬
4. âœ… å‘é€æ–‡æ¡£æ–‡ä»¶
5. âœ… æ··åˆå›¾ç‰‡å’Œæ–‡æ¡£
6. âœ… æ‚¬åœæ•ˆæœ
7. âœ… æ»šåŠ¨æŸ¥çœ‹å†å²æ¶ˆæ¯

### è§†è§‰æµ‹è¯•
1. å›¾ç‰‡å°ºå¯¸ä¸€è‡´æ€§
2. é—´è·å’Œå¯¹é½
3. é˜´å½±å’Œè¾¹æ¡†
4. åŠ¨ç”»æµç•…åº¦
5. ä¸åŒå±å¹•å°ºå¯¸

### è¾¹ç•Œæµ‹è¯•
1. è¶…å¤§å›¾ç‰‡ï¼ˆ> 10MBï¼‰
2. è¶…å¤šå›¾ç‰‡ï¼ˆ> 10 å¼ ï¼‰
3. ç‰¹æ®Šæ–‡ä»¶å
4. æŸåçš„å›¾ç‰‡
5. ç½‘ç»œæ…¢åŠ è½½

## æ ·å¼å˜é‡

å¯ä»¥é€šè¿‡ CSS å˜é‡è°ƒæ•´ï¼š

```css
:root {
  --attachment-small-size: 80px;
  --attachment-gap: 8px;
  --attachment-border-radius: 10px;
  --attachment-hover-scale: 1.05;
}

.message-attachment-image-small {
  width: var(--attachment-small-size);
  height: var(--attachment-small-size);
  border-radius: var(--attachment-border-radius);
}

.message-attachment-image-small:hover {
  transform: scale(var(--attachment-hover-scale));
}
```

## æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–æ˜¾è‘—æå‡äº†é™„ä»¶çš„å¯è§æ€§å’Œå¯¹è¯çš„è¿è´¯æ€§ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ›´æ¸…æ¥šåœ°çœ‹åˆ°è‡ªå·±å‘é€çš„å†…å®¹ï¼ŒåŒæ—¶ä¿æŒç•Œé¢çš„ç®€æ´å’Œç¾è§‚ã€‚

**æ ¸å¿ƒæ”¹è¿›**ï¼š
- ğŸ“ ä½ç½®ï¼šä» Composer ç§»åˆ°æ¶ˆæ¯ä¸Šæ–¹
- ğŸ“ å°ºå¯¸ï¼šä» 120x120 ç¼©å°åˆ° 80x80
- ğŸ”„ çŠ¶æ€ï¼šä»æ¶ˆå¤±æ”¹ä¸ºä¿ç•™
- âœ¨ ä½“éªŒï¼šæ›´è¿è´¯ã€æ›´ç›´è§‚ã€æ›´ä¸“ä¸š

